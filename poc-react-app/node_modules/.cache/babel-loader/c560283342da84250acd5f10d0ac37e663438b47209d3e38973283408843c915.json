{"ast":null,"code":"// src/components/UploadForm.js\nimport React,{useState}from'react';import AWS from'aws-sdk';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UploadForm=()=>{const[inputText,setInputText]=useState('');const[selectedFile,setSelectedFile]=useState(null);const handleTextInputChange=event=>{setInputText(event.target.value);};const handleFileInputChange=event=>{setSelectedFile(event.target.files[0]);};const handleSubmit=async event=>{event.preventDefault();if(selectedFile){const s3=new AWS.S3();const bucket_name='pocprojectbucket';try{const uploadResponse=await s3.upload({Bucket:bucket_name,Key:selectedFile.name,Body:selectedFile}).promise();// alert('File uploaded successfully to: ' + uploadResponse.Location);\n// Show success notification\ntoast.success('File uploaded successfully !',{autoClose:3000// Close after 3 seconds\n});const s3Path=\"s3://\".concat(bucket_name,\"/\").concat(selectedFile.name);const apiGatewayUrl='https://08lgx212oh.execute-api.us-east-2.amazonaws.com/dev/fileprocessor';const apiResponse=await fetch(apiGatewayUrl,{method:'POST',headers:{'Content-Type':'application/json','x-api-key':'1L1KKXWm3X3IBbuvsmBn55t8gH0JQdzl2OIB5rxe'},body:JSON.stringify({input_text:inputText,input_file_path:s3Path})});if(!apiResponse.ok){throw new Error(\"HTTP error! status: \".concat(apiResponse.status));}const apiData=await apiResponse.json();console.log('Data saved to DynamoDB:',apiData);// alert('File information saved successfully!');\n// Show success notification\ntoast.success('Input information saved successfully!',{autoClose:3000// Close after 3 seconds\n});// Reset input text and chosen file after successful upload and save\nsetInputText('');setSelectedFile(null);document.getElementById('file-input').value='';}catch(err){console.error('Error:',err);alert('Error uploading file or saving data: '+err.message);}}else{alert('Please select a file to upload.');}};return/*#__PURE__*/_jsx(\"div\",{class:\"container\",children:/*#__PURE__*/_jsx(\"div\",{class:\"form-box\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{for:\"text-input\",children:\"Text input:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"text-input\",type:\"text\",value:inputText,onChange:handleTextInputChange,placeholder:\"Enter text here\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{for:\"file-input\",children:\"File input:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"file-input\",type:\"file\",onChange:handleFileInputChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(ToastContainer,{})]})})});};export default UploadForm;","map":{"version":3,"names":["React","useState","AWS","ToastContainer","toast","jsx","_jsx","jsxs","_jsxs","UploadForm","inputText","setInputText","selectedFile","setSelectedFile","handleTextInputChange","event","target","value","handleFileInputChange","files","handleSubmit","preventDefault","s3","S3","bucket_name","uploadResponse","upload","Bucket","Key","name","Body","promise","success","autoClose","s3Path","concat","apiGatewayUrl","apiResponse","fetch","method","headers","body","JSON","stringify","input_text","input_file_path","ok","Error","status","apiData","json","console","log","document","getElementById","err","error","alert","message","class","children","onSubmit","for","id","type","onChange","placeholder"],"sources":["/Users/kakkachi/Src/AWSFileProcessor/poc-react-app/src/components/UploadForm.js"],"sourcesContent":["// src/components/UploadForm.js\r\n\r\nimport React, { useState } from 'react';\r\nimport AWS from 'aws-sdk';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nconst UploadForm = () => {\r\n  const [inputText, setInputText] = useState('');\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n\r\n  const handleTextInputChange = (event) => {\r\n    setInputText(event.target.value);\r\n  };\r\n\r\n  const handleFileInputChange = (event) => {\r\n    setSelectedFile(event.target.files[0]);\r\n  };\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    if (selectedFile) {\r\n      const s3 = new AWS.S3();\r\n\r\n      const bucket_name = 'pocprojectbucket';\r\n\r\n\r\n      try {\r\n        const uploadResponse = await s3.upload({\r\n          Bucket: bucket_name , \r\n          Key: selectedFile.name, \r\n          Body: selectedFile, \r\n        }).promise();\r\n\r\n        // alert('File uploaded successfully to: ' + uploadResponse.Location);\r\n        // Show success notification\r\n        toast.success('File uploaded successfully !', {\r\n          autoClose: 3000, // Close after 3 seconds\r\n        });\r\n\r\n        const s3Path = `s3://${bucket_name }/${selectedFile.name}`;\r\n\r\n        const apiGatewayUrl = 'https://08lgx212oh.execute-api.us-east-2.amazonaws.com/dev/fileprocessor';\r\n\r\n        const apiResponse = await fetch(apiGatewayUrl, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'x-api-key': '1L1KKXWm3X3IBbuvsmBn55t8gH0JQdzl2OIB5rxe',\r\n          },\r\n          body: JSON.stringify({\r\n            input_text: inputText, \r\n            input_file_path: s3Path,\r\n          }),\r\n        });\r\n\r\n        if (!apiResponse.ok) {\r\n          throw new Error(`HTTP error! status: ${apiResponse.status}`);\r\n        }\r\n\r\n        const apiData = await apiResponse.json();\r\n        console.log('Data saved to DynamoDB:', apiData);\r\n        // alert('File information saved successfully!');\r\n\r\n        // Show success notification\r\n        toast.success('Input information saved successfully!', {\r\n          autoClose: 3000, // Close after 3 seconds\r\n        });\r\n\r\n        // Reset input text and chosen file after successful upload and save\r\n        setInputText('');\r\n        setSelectedFile(null);\r\n        document.getElementById('file-input').value = '';\r\n\r\n\r\n      } catch (err) {\r\n        console.error('Error:', err);\r\n        alert('Error uploading file or saving data: ' + err.message);\r\n      }\r\n    } else {\r\n      alert('Please select a file to upload.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div class=\"container\">\r\n  <div class=\"form-box\">\r\n    <form onSubmit={handleSubmit}>\r\n      <label for=\"text-input\">Text input:</label>\r\n      <input\r\n        id=\"text-input\"\r\n        type=\"text\"\r\n        value={inputText}\r\n        onChange={handleTextInputChange}\r\n        placeholder=\"Enter text here\"\r\n      />\r\n      <br />\r\n      <label for=\"file-input\">File input:</label>\r\n      <input\r\n        id=\"file-input\"\r\n        type=\"file\"\r\n        onChange={handleFileInputChange}\r\n      />\r\n      <br />\r\n      <button type=\"submit\">Submit</button>\r\n      <br/>\r\n      <ToastContainer />\r\n    </form>\r\n  </div>\r\n</div>\r\n  );\r\n};\r\n\r\nexport default UploadForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}